import{r as t,u as O,a as U,q,s as G,j as e,F as I,b as H,T as M,t as J,v as Q,w as W,x as X,c as b,d as Y,e as Z,g as ee,h as D,i as se,A as ae}from"./index-yhZE5bDn.js";import{S as re}from"./react-select.esm-WlMhyNq1.js";import{u as te,C as ne,G as le,B as ie}from"./GridViewToggle-DubpI4Sv.js";const ce=()=>{var _;const[v,y]=t.useState([]),[n,F]=t.useState({key:"market_cap",direction:"desc"}),[i,g]=t.useState(1),[m,E]=t.useState(100),[$,oe]=t.useState([]),[f,j]=t.useState([]),[c,N]=t.useState(""),[A,w]=t.useState(!1),h=t.useRef(null),P=O(),d=U(s=>s.favorites),K=te(s=>s.gridView),k=s=>{P(`/cryptoverse-explorer/coins/${s.id}`)};t.useEffect(()=>{q(m,i).then(y).catch(s=>console.error("Error fetching crypto data:",s))},[i,m]),t.useEffect(()=>{const s=async()=>{try{const r=await X(c);j(r)}catch(r){console.error("Error fetching data:",r)}},a=G.debounce(s,300);return c!==""?a():j([]),()=>{a.cancel()}},[c]),t.useEffect(()=>{const s=a=>{a.key==="/"?(h.current.focus(),a.preventDefault()):a.key==="Escape"&&h.current.blur()};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[]);const T=()=>{N(""),w(!1),h.current.focus()},B=s=>{s.key==="/"&&(h.current.focus(),s.preventDefault())},R=s=>{let a="desc";n.key===s&&(a=n.direction==="desc"?"asc":"desc");let r=[...v];s==="favorite"?r=r.sort((o,p)=>{const x=d.includes(o.id),u=d.includes(p.id);return x&&!u?-1:!x&&u?1:x&&u?n.direction==="desc"?d.indexOf(o.id)-d.indexOf(p.id):d.indexOf(p.id)-d.indexOf(o.id):0}):r=r.sort((o,p)=>{const x=o[s],u=p[s];return x<u?a==="asc"?-1:1:x>u?a==="asc"?1:-1:0}),y(r),F({key:s,direction:a})},C=[...v].sort((s,a)=>n.direction==="desc"?s[n.key]>a[n.key]?-1:1:n.direction==="asc"?s[n.key]>a[n.key]?1:-1:0),z=s=>n.key===s?n.direction==="desc"?e.jsx(D,{className:"inline p-0.5 pe-1"}):e.jsx(se,{className:"inline p-0.5 pe-1"}):e.jsx(D,{className:"opacity-25 group-hover:opacity-75 transition-opacity inline p-0.5 px-1"}),l=({label:s,sortKey:a,className:r})=>e.jsxs("th",{className:`px-4 py-2  cursor-pointer group  ${r} `,onClick:()=>R(a),children:[" ",s!=="Name"&&z(a),s,s==="Name"&&z(a)]}),L=({crypto:s,index:a})=>{var r;return e.jsxs("tr",{className:`${a%2===0?"bg-zinc-200 dark:bg-zinc-700":"bg-gray-50 dark:bg-zinc-800"} cursor-pointer hover:bg-zinc-400 dark:hover:bg-zinc-500 transition-colors whitespace-nowrap `,onClick:()=>k(s),children:[e.jsx("td",{className:"px-4 py-2",children:s.market_cap_rank}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{className:"w-8 h-8 p-1",src:s.image,alt:`${s.name} Logo`}),e.jsx("span",{className:"ml-2",children:s.name})," ",e.jsx("span",{className:"inline-block text-gray-700 dark:text-gray-300 px-2 py-1 text-xs font-semibold uppercase",children:s.symbol})]})}),e.jsxs("td",{className:"px-4 py-2 text-end",children:["$",b(s.current_price)]}),e.jsxs("td",{className:`px-4 py-2 text-end ${s.price_change_percentage_24h>=0?"text-green-600":"text-red-600"}`,children:[s.price_change_percentage_24h>=0?e.jsx(Y,{className:"p-0.5 pe-1 inline-flex"}):e.jsx(Z,{className:"p-0.5 pe-1 inline-flex"}),(r=s.price_change_percentage_24h)==null?void 0:r.toFixed(2),"%"]}),e.jsxs("td",{className:"px-4 py-2 text-end",children:["$",b(s.market_cap)]}),e.jsxs("td",{className:"px-4 py-2 text-end",children:["$",b(s.low_24h)]}),e.jsxs("td",{className:"px-4 py-2 text-end",children:["$",b(s.high_24h)]}),e.jsxs("td",{children:[" ",e.jsx(ee,{id:s.id})]})]},s.id)},S=s=>{s==="next"?g(i+1):s==="prev"&&i>1&&g(i-1)},V=s=>{const a=s.target.value;N(a),w(a!=="");const r=$.filter(o=>o.name.toLowerCase().includes(a.toLowerCase()));j(r)};return e.jsxs("div",{className:"container mx-auto ",children:[e.jsxs("div",{className:"md:inline-flex md:w-full w-full ",children:[e.jsx("h2",{className:"text-3xl font-semibold mb-4",children:"All Coins"}),e.jsxs("form",{className:"md:!ml-auto md:!mr-0 mx-auto w-80 relative",onSubmit:s=>s.preventDefault(),children:[e.jsx("label",{htmlFor:"default-search",className:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white",children:"Search"}),e.jsxs("div",{className:"relative group w-full",children:[e.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:e.jsx(I,{className:"opacity-40"})}),e.jsx("input",{id:"default-search",className:"block w-full p-3 px-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-teal-500 focus:border-teal-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white ",placeholder:"Search all coins",required:!0,value:c,onChange:V,onKeyDown:B,ref:h}),A?e.jsx("button",{type:"button",className:"absolute inset-y-0 hover:scale-105 pointer-cursor border-none end-0 flex items-center pr-3",onClick:T,children:e.jsx(H,{className:"opacity-40"})}):e.jsx("div",{className:"absolute group group-focus-within:invisible inset-y-0 end-0 flex items-center pr-3",children:e.jsxs("div",{className:"relative",children:[e.jsx("kbd",{className:"px-2 py-1.5 text-xs font-semibold text-gray-800 bg-gray-100 border border-gray-200 rounded-lg dark:bg-gray-600 dark:text-gray-100 dark:border-gray-500",children:"/"}),e.jsx(M,{className:"opacity-0 z-50 -bottom-12 group-hover:-bottom-10 group-hover:opacity-100 whitespace-nowrap",content:"Use to trigger search",showArrow:!1})]})})]}),(c==null?void 0:c.length)>0&&((_=f==null?void 0:f.coins)==null?void 0:_.length)>0&&e.jsx(J.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},transition:{duration:.2},className:"mt-1.5 dark:bg-zinc-800 z-10 bg-zinc-200 text-start rounded-md overflow-auto overflow-x-hidden absolute max-h-64 w-full scroll shadow-lg",children:e.jsx("ul",{children:f.coins.map(s=>e.jsxs("li",{className:"px-6 py-2 hover:bg-zinc-700 hover:shadow hover:text-zinc-100 cursor-pointer",onClick:()=>{k(s)},children:[e.jsx("img",{src:s.thumb,alt:"",className:"w-6 h-6 inline-block mr-2"}),s.name," ",e.jsx("span",{className:"inline-block dark:text-gray-300 px-2 py-1 text-xs font-semibold uppercase",children:s.symbol})]},s.id))})})]})," "]}),K?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:[" ",C.map((s,a)=>e.jsx(ne,{coin:s},s.id))]}):e.jsx("div",{className:"",children:e.jsxs("table",{className:"table-auto w-full rounded-lg overflow-hidden",children:[e.jsx("thead",{className:"bg-zinc-300 dark:bg-zinc-900  w-full ",children:e.jsxs("tr",{children:[e.jsx(l,{className:"w-10 text-end",label:"#",sortKey:"market_cap_rank"}),e.jsx(l,{className:"!text-start",label:"Name",sortKey:"name"}),e.jsx(l,{label:"Current Price (USD)",sortKey:"current_price"}),e.jsx(l,{label:"24h Change (%)",sortKey:"price_change_percentage_24h"}),e.jsx(l,{label:"Market Cap (USD)",sortKey:"market_cap"}),e.jsx(l,{label:"24h Low",sortKey:"low_24h"}),e.jsx(l,{label:"24h High",sortKey:"high_24h"}),e.jsx(l,{className:"text-end ",label:"",sortKey:"favorite"})]})}),e.jsx("tbody",{children:C.map((s,a)=>e.jsx(L,{crypto:s,index:a},s.id))})]})})," ",e.jsxs("form",{onSubmit:s=>s.preventDefault(),className:"items-center justify-center h-full space-x-5 my-5 mx-auto inline-flex  w-full",children:[e.jsx("button",{disabled:i===1,className:"h-full text-zinc-800 bg-zinc-100 disabled:border-none disabled:opacity-50 border border-[#ccc] dark:bg-zinc-800  dark:text-zinc-100",onClick:()=>S("prev"),children:e.jsx(Q,{})}),e.jsx("input",{min:1,value:i,onChange:s=>g(s.target.value),className:"w-10 p-1 py-2 outline-none h-full bg-zinc-100 border hover:border-[#646cff] active:border-[#646cff] border-[#ccc] dark:bg-zinc-800 rounded-lg text-center dark:text-zinc-100"}),e.jsx(re,{isSearchable:!1,defaultValue:m,menuPlacement:"bottom",classNames:{menu:()=>"bg-zinc-100 dark:bg-zinc-800  !rounded-lg overflow-hidden",option:()=>" bg-zinc-100 dark:bg-zinc-800 hover:!bg-zinc-500",menuPortal:()=>"z-40  ",selectedOption:()=>"bg-red-500",singleValue:()=>"dark:text-zinc-100 text-zinc-800 ",control:()=>" dark:!bg-zinc-800 !bg-zinc-100 !rounded-lg !h-full !cursor-pointer hover:!border hover:!border-[#646cff] ",placeholder:()=>" bg-zinc-100  dark:text-zinc-100"},options:[{value:50,label:"50 per page"},{value:100,label:"100 per page"},{value:250,label:"250 per page"}],value:{value:m,label:`${m} per page`},onChange:s=>{E(s.value),g(1)},className:"border-none outline-none rounded-lg color-black"}),e.jsx("button",{className:"h-full text-zinc-800 bg-zinc-100 border border-[#ccc] dark:bg-zinc-800 dark:text-zinc-100",onClick:()=>S("next"),children:e.jsx(W,{})})," "]})]})};function me(){return e.jsxs("div",{className:"transition-all duration-50 flex-grow bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-neutral-200  w-full",children:[e.jsxs("div",{className:"w-full flex justify-between",children:[e.jsx("div",{className:"invisible w-32",children:" "}),e.jsxs("div",{className:"text-xl opacity-80 mt-4 mb-10 inline-flex items-center   space-x-5",children:["Cryptoverse ",e.jsx(ae,{className:"mx-2"})," Explorer"]}),e.jsx("div",{className:"w-32",children:e.jsx(le,{})})]}),e.jsx("div",{className:"mx-auto mb-24",children:e.jsx(ce,{})}),e.jsx(ie,{})]})}export{me as default};
